(this.webpackJsonpcra=this.webpackJsonpcra||[]).push([[0],{111:function(e,t,i){"use strict";i.r(t);var n,r=i(3),s=i.n(r),a=i(47),c=i.n(a),o=i(26),h=i(27),u=h.a(n||(n=Object(o.a)(["\n  html,\n  body,\n  #root {\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n  }\n\n  .landing-screen {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 100%;\n  }\n\n  #experience {\n    display: block;\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: hidden;\n  }\n"]))),d=i(29),l=i(8),f=i(0),v=i(1),p=i(11),g=function(){function e(){Object(f.a)(this,e),this.experience=void 0,this.instance=void 0,this.experience=new O,this.setInstance()}return Object(v.a)(e,[{key:"setInstance",value:function(){this.instance=new l.Camera}},{key:"start",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.instance.start(e)}},{key:"update",value:function(){this.experience.renderer&&this.instance.updateFrame(this.experience.renderer.instance)}}]),e}(),m=function(){function e(){Object(f.a)(this,e),this.experience=void 0,this.instance=void 0,this.experience=new O,this.removeDomElement(),this.setInstance()}return Object(v.a)(e,[{key:"removeDomElement",value:function(){var e,t=document.querySelector("canvas");t&&(null===(e=document.getElementById("experience"))||void 0===e||e.removeChild(t))}},{key:"setInstance",value:function(){this.instance=new p.WebGLRenderer({antialias:!0}),this.instance.setSize(this.experience.config.width,this.experience.config.height),this.instance.setPixelRatio(this.experience.config.pixelRatio)}},{key:"resize",value:function(){this.instance.setSize(this.experience.config.width,this.experience.config.height),this.instance.setPixelRatio(this.experience.config.pixelRatio)}},{key:"update",value:function(){this.instance.render(this.experience.scene,this.experience.camera.instance)}}]),e}(),b=i.p+"static/media/faceMeshTemplate.7c10f762.png",w=function(){function e(){Object(f.a)(this,e),this.directionalLight=void 0,this.ambientLight=void 0,this.setLights()}return Object(v.a)(e,[{key:"setLights",value:function(){this.directionalLight=new p.DirectionalLight("white",.8),this.directionalLight.position.set(0,5,0),this.directionalLight.lookAt(0,0,0),this.ambientLight=new p.AmbientLight("white",.4)}}]),e}(),y=function(){function e(){Object(f.a)(this,e),this.experience=void 0,this.lights=void 0,this.faceMaterial=void 0,this.faceBufferGeometry=void 0,this.faceTrackerGroup=void 0,this.faceMeshMesh=void 0,this.experience=new O,this.setLights(),this.setFace(),this.setVisibility()}return Object(v.a)(e,[{key:"setLights",value:function(){this.lights=new w,this.experience.scene.add(this.lights.directionalLight,this.lights.ambientLight)}},{key:"setVisibility",value:function(){var e=this;this.faceTrackerGroup.faceTracker.onVisible.bind((function(){e.faceTrackerGroup.visible=!0})),this.faceTrackerGroup.faceTracker.onNotVisible.bind((function(){e.faceTrackerGroup.visible=!1}))}},{key:"setFace",value:function(){var e=new l.LoadingManager,t=new l.FaceTrackerLoader(e).load();this.faceTrackerGroup=new l.FaceAnchorGroup(this.experience.camera.instance,t),this.experience.scene.add(this.faceTrackerGroup);var i=new l.FaceMeshLoader(e).load();this.faceBufferGeometry=new l.FaceBufferGeometry(i);var n=new p.TextureLoader(e).load(b);n.flipY=!0,this.faceMaterial=new p.MeshStandardMaterial({map:n,transparent:!0}),this.faceMeshMesh=new p.Mesh(this.faceBufferGeometry,this.faceMaterial),this.faceTrackerGroup.add(this.faceMeshMesh)}},{key:"update",value:function(){this.faceBufferGeometry&&this.faceBufferGeometry.updateFromFaceAnchorGroup(this.faceTrackerGroup)}},{key:"destroy",value:function(){!!this.faceMaterial&&!!this.faceBufferGeometry&&!!this.lights&&!!this.experience.scene&&(this.faceMaterial.dispose(),this.faceBufferGeometry.dispose(),this.faceTrackerGroup.remove(this.faceMeshMesh),this.experience.scene.remove(this.lights.directionalLight,this.lights.ambientLight))}}]),e}(),k=function(){function e(){Object(f.a)(this,e),this.face=void 0,this.setFace()}return Object(v.a)(e,[{key:"setFace",value:function(){this.face=new y}},{key:"resize",value:function(){}},{key:"update",value:function(){this.face.update()}},{key:"destroy",value:function(){this.face.destroy()}}]),e}(),x=function(){function e(t){if(Object(f.a)(this,e),this.isRunning=!1,this.targetElement=void 0,this.config=void 0,this.scene=void 0,this.renderer=void 0,this.camera=void 0,this.world=void 0,l.browserIncompatible())throw l.browserIncompatibleUI(),new Error("Unsupported browser");if(e.instance)return e.instance;e.instance=this,this.targetElement=null===t||void 0===t?void 0:t.targetElement,this.targetElement?(this.setScene(),this.setCamera(),this.setConfig(),this.setRenderer(),this.setWorld(),this.setResize(),this.isRunning=!0,console.log("Starting experience..."),this.update()):console.warn("Missing 'targetElement' property")}return Object(v.a)(e,[{key:"setWorld",value:function(){this.world=new k}},{key:"setCamera",value:function(){this.camera=new g,this.camera.instance.start(!0),this.scene.background=this.camera.instance.backgroundTexture}},{key:"setConfig",value:function(){var e;this.config={pixelRatio:0,width:0,height:0},this.config.pixelRatio=Math.min(Math.max(window.devicePixelRatio,1),2);var t=null===(e=this.targetElement)||void 0===e?void 0:e.getBoundingClientRect();this.config.width=(null===t||void 0===t?void 0:t.width)||window.innerWidth,this.config.height=(null===t||void 0===t?void 0:t.height)||window.innerHeight}},{key:"setScene",value:function(){this.scene=new p.Scene}},{key:"setResize",value:function(){var e,t=this;null===(e=this.targetElement)||void 0===e||e.addEventListener("resize",(function(){var e,i=null===(e=t.targetElement)||void 0===e?void 0:e.getBoundingClientRect();t.config.width=(null===i||void 0===i?void 0:i.width)||window.innerWidth,t.config.height=(null===i||void 0===i?void 0:i.height)||window.innerHeight,t.world.resize(),t.renderer.resize()}))}},{key:"setRenderer",value:function(){var e;this.renderer=new m,null===(e=this.targetElement)||void 0===e||e.appendChild(this.renderer.instance.domElement),l.glContextSet(this.renderer.instance.getContext())}},{key:"update",value:function(){var e,t,i;this.isRunning&&(null===(e=this.camera)||void 0===e||e.update(),null===(t=this.world)||void 0===t||t.update(),null===(i=this.renderer)||void 0===i||i.update(),requestAnimationFrame(this.update.bind(this)))}},{key:"destroy",value:function(){var e;this.stop(),null===(e=this.world)||void 0===e||e.destroy()}},{key:"stop",value:function(){this.isRunning=!1}}]),e}();x.instance=void 0;var j,O=x,L=i(12),M=function(){var e=Object(r.useRef)(null),t=Object(r.useRef)();return Object(r.useEffect)((function(){return t.current=new O({targetElement:e.current}),function(){var e;return null===(e=t.current)||void 0===e?void 0:e.stop()}}),[e]),Object(L.jsx)("div",{id:"experience",ref:e})},G=h.b.button(j||(j=Object(o.a)(["\n  /* Adapt the colors based on primary prop */\n  background: ",";\n  color: ",";\n\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n    color: ",";\n  }\n\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid palevioletred;\n  border-radius: 3px;\n"])),(function(e){return e.primary?"palevioletred":"transparent"}),(function(e){return e.primary?"white":"palevioletred"}),(function(e){return e.primary?"transparent":"palevioletred"}),(function(e){return e.primary?"palevioletred":"white"})),R=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),i=t[0],n=t[1];return i?Object(L.jsx)(M,{}):Object(L.jsx)("div",{className:"landing-screen",children:Object(L.jsx)(G,{onClick:function(){l.permissionRequest().then((function(e){e?n(!0):l.permissionDeniedUI()}))},children:"Allow Camera"})})},E=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,112)).then((function(t){var i=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;i(e),n(e),r(e),s(e),a(e)}))};c.a.render(Object(L.jsxs)(s.a.StrictMode,{children:[Object(L.jsx)(u,{}),Object(L.jsx)(R,{})]}),document.getElementById("root")),E()}},[[111,1,2]]]);
//# sourceMappingURL=main.9de5418a.chunk.js.map