(this.webpackJsonpcra=this.webpackJsonpcra||[]).push([[0],{102:function(e,t,i){"use strict";i.r(t);var r=i(11),n=i.n(r),a=i(42),s=i.n(a),c=(i(48),i(26)),o=i(8),h=i(0),d=i(1),f=i(13),u=i.p+"static/media/faceMeshTemplate.6e15d49f.png",l=new(function(){function e(){if(Object(h.a)(this,e),this.camera=void 0,this.faceTrackerGroup=void 0,this.faceMeshMesh=void 0,this.faceMaterial=void 0,this.faceBufferGeometry=void 0,this.directionalLight=void 0,this.ambientLight=void 0,this.renderer=void 0,this.scene=void 0,this.targetElement=void 0,o.browserIncompatible())throw o.browserIncompatibleUI(),new Error("Unsupported browser");this.renderer=new f.WebGLRenderer({antialias:!0}),this.scene=new f.Scene,this.camera=new o.Camera,this.camera.start(!0),this.scene.background=this.camera.backgroundTexture}return Object(d.a)(e,[{key:"setResize",value:function(){var e,t=this;null===(e=this.targetElement)||void 0===e||e.addEventListener("resize",(function(){var e,i,r=(null===(e=t.targetElement)||void 0===e?void 0:e.offsetWidth)||window.innerWidth,n=(null===(i=t.targetElement)||void 0===i?void 0:i.offsetHeight)||window.innerHeight;t.renderer.setSize(r,n)}))}},{key:"setLight",value:function(){this.directionalLight=new f.DirectionalLight("white",.8),this.directionalLight.position.set(0,5,0),this.directionalLight.lookAt(0,0,0),this.ambientLight=new f.AmbientLight("white",.4),this.scene.add(this.directionalLight,this.ambientLight)}},{key:"setFace",value:function(){var e=this,t=new o.LoadingManager,i=new o.FaceTrackerLoader(t).load();this.faceTrackerGroup=new o.FaceAnchorGroup(this.camera,i),this.scene.add(this.faceTrackerGroup);var r=new o.FaceMeshLoader(t).load();this.faceBufferGeometry=new o.FaceBufferGeometry(r);var n=new f.TextureLoader(t).load(u);n.flipY=!0,this.faceMaterial=new f.MeshStandardMaterial({map:n,transparent:!0}),this.faceMeshMesh=new f.Mesh(this.faceBufferGeometry,this.faceMaterial),this.faceTrackerGroup.add(this.faceMeshMesh),this.faceTrackerGroup.faceTracker.onVisible.bind((function(){e.faceTrackerGroup.visible=!0})),this.faceTrackerGroup.faceTracker.onNotVisible.bind((function(){e.faceTrackerGroup.visible=!1}))}},{key:"setRenderer",value:function(){var e;this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(Math.min(window.devicePixelRatio,2)),null===(e=this.targetElement)||void 0===e||e.appendChild(this.renderer.domElement),o.glContextSet(this.renderer.getContext())}},{key:"render",value:function(){this.camera.updateFrame(this.renderer),this.faceBufferGeometry.updateFromFaceAnchorGroup(this.faceTrackerGroup),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.render.bind(this))}},{key:"dispose",value:function(){!!this.faceMaterial&&!!this.faceBufferGeometry&&!!this.scene&&!!this.directionalLight&&!!this.ambientLight&&(this.faceMaterial.dispose(),this.faceBufferGeometry.dispose(),this.faceTrackerGroup.remove(this.faceMeshMesh),this.scene.remove(this.directionalLight,this.ambientLight))}},{key:"init",value:function(e){if(!e)throw new Error("Missing 'targetElement' property");this.targetElement=e,this.setRenderer(),this.setFace(),this.setLight(),this.setResize(),this.render()}}]),e}()),m=i(12),p=function(){var e=Object(r.useRef)(null);return Object(r.useEffect)((function(){return l.init(e.current),function(){return l.dispose()}}),[e]),Object(m.jsx)("div",{id:"experience",ref:e})},v=function(){var e=Object(r.useState)(!1),t=Object(c.a)(e,2),i=t[0],n=t[1];return i?Object(m.jsx)(p,{}):Object(m.jsx)("div",{className:"splash-screen",children:Object(m.jsx)("button",{onClick:function(){o.permissionRequest().then((function(e){e?n(!0):o.permissionDeniedUI()}))},children:"Allow Camera"})})},g=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,103)).then((function(t){var i=t.getCLS,r=t.getFID,n=t.getFCP,a=t.getLCP,s=t.getTTFB;i(e),r(e),n(e),a(e),s(e)}))};s.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(v,{})}),document.getElementById("root")),g()},48:function(e,t,i){}},[[102,1,2]]]);
//# sourceMappingURL=main.f47e05f3.chunk.js.map