(this.webpackJsonpcra=this.webpackJsonpcra||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t);var i=n(49),r=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,121)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),i(e),r(e),s(e),a(e)}))},s=n(29),a=n(4),c=n(0),o=n(1),h=n(8),u=n(12),d=function(){function e(){Object(c.a)(this,e),this.experience=void 0,this.instance=void 0,this.experience=new j,this.setInstance()}return Object(o.a)(e,[{key:"setInstance",value:function(){this.instance=new h.Camera}},{key:"start",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.instance.start(e)}},{key:"update",value:function(){this.experience.renderer&&this.instance.updateFrame(this.experience.renderer.instance)}}]),e}(),l=function(){function e(){Object(c.a)(this,e),this.experience=void 0,this.instance=void 0,this.experience=new j,this.removeDomElement(),this.setInstance()}return Object(o.a)(e,[{key:"removeDomElement",value:function(){var e,t=document.querySelector("canvas");t&&(null===(e=document.getElementById("experience"))||void 0===e||e.removeChild(t))}},{key:"setInstance",value:function(){this.instance=new u.WebGLRenderer({antialias:!0}),this.instance.setSize(this.experience.config.screen.width,this.experience.config.screen.height),this.instance.setPixelRatio(this.experience.config.screen.pixelRatio)}},{key:"resize",value:function(){this.instance.setSize(this.experience.config.screen.width,this.experience.config.screen.height),this.instance.setPixelRatio(this.experience.config.screen.pixelRatio)}},{key:"update",value:function(){this.instance.render(this.experience.scene,this.experience.camera.instance)}}]),e}(),f=n.p+"static/media/faceMeshTemplate.7c10f762.png",p=function(){function e(){Object(c.a)(this,e),this.directionalLight=void 0,this.ambientLight=void 0,this.setLights()}return Object(o.a)(e,[{key:"setLights",value:function(){this.directionalLight=new u.DirectionalLight("white",.8),this.directionalLight.position.set(0,5,0),this.directionalLight.lookAt(0,0,0),this.ambientLight=new u.AmbientLight("white",.4)}}]),e}(),v=function(){function e(){Object(c.a)(this,e),this.experience=void 0,this.lights=void 0,this.faceMaterial=void 0,this.faceBufferGeometry=void 0,this.faceTrackerGroup=void 0,this.faceMeshMesh=void 0,this.experience=new j,this.setLights(),this.setFace(),this.setVisibility()}return Object(o.a)(e,[{key:"setLights",value:function(){this.lights=new p,this.experience.scene.add(this.lights.directionalLight,this.lights.ambientLight)}},{key:"setVisibility",value:function(){var e=this;this.faceTrackerGroup.faceTracker.onVisible.bind((function(){e.faceTrackerGroup.visible=!0})),this.faceTrackerGroup.faceTracker.onNotVisible.bind((function(){e.faceTrackerGroup.visible=!1}))}},{key:"setFace",value:function(){var e=new h.LoadingManager,t=new h.FaceTrackerLoader(e).load();this.faceTrackerGroup=new h.FaceAnchorGroup(this.experience.camera.instance,t),this.experience.scene.add(this.faceTrackerGroup);var n=new h.FaceMeshLoader(e).load();this.faceBufferGeometry=new h.FaceBufferGeometry(n);var i=new u.TextureLoader(e).load(f);i.flipY=!0,this.faceMaterial=new u.MeshStandardMaterial({map:i,transparent:!0}),this.faceMeshMesh=new u.Mesh(this.faceBufferGeometry,this.faceMaterial),this.faceTrackerGroup.add(this.faceMeshMesh)}},{key:"update",value:function(){this.faceBufferGeometry&&this.faceBufferGeometry.updateFromFaceAnchorGroup(this.faceTrackerGroup)}},{key:"destroy",value:function(){!!this.faceMaterial&&!!this.faceBufferGeometry&&!!this.lights&&!!this.experience.scene&&(this.faceMaterial.dispose(),this.faceBufferGeometry.dispose(),this.faceTrackerGroup.remove(this.faceMeshMesh),this.experience.scene.remove(this.lights.directionalLight,this.lights.ambientLight))}}]),e}(),g=function(){function e(){Object(c.a)(this,e),this.face=void 0,this.setFace()}return Object(o.a)(e,[{key:"setFace",value:function(){this.face=new v}},{key:"resize",value:function(){}},{key:"update",value:function(){this.face.update()}},{key:"destroy",value:function(){this.face.destroy()}}]),e}(),m=Object(o.a)((function e(){if(Object(c.a)(this,e),this.experience=void 0,this.screen=void 0,this.model=void 0,this.controls=void 0,e.instance)return e.instance;e.instance=this,this.experience=new j,this.model={size:.0125};var t=this.experience.targetElement.getBoundingClientRect(),n=t.width||window.innerWidth,i=t.height||window.innerHeight;this.screen={pixelRatio:Math.min(Math.max(window.devicePixelRatio,1),2),width:n,height:i},this.controls={enabled:!0}}));m.instance=void 0;var b=function(){function e(t){if(Object(c.a)(this,e),this.isRunning=!1,this.targetElement=void 0,this.config=void 0,this.scene=void 0,this.renderer=void 0,this.camera=void 0,this.world=void 0,h.browserIncompatible())throw h.browserIncompatibleUI(),new Error("Unsupported browser");if(e.instance)return e.instance;e.instance=this,null!==t&&void 0!==t&&t.targetElement?(this.targetElement=null===t||void 0===t?void 0:t.targetElement,this.setConfig(),this.setScene(),this.setCamera(),this.setRenderer(),this.setWorld(),this.setResize(),this.isRunning=!0,console.log("Starting experience..."),this.update()):console.warn("Missing 'targetElement' property")}return Object(o.a)(e,[{key:"setWorld",value:function(){this.world=new g}},{key:"setCamera",value:function(){this.camera=new d,this.camera.instance.start(!0),this.scene.background=this.camera.instance.backgroundTexture}},{key:"setConfig",value:function(){this.config=new m}},{key:"setScene",value:function(){this.scene=new u.Scene}},{key:"setResize",value:function(){var e=this;window.addEventListener("resize",(function(){var t=e.targetElement.getBoundingClientRect();e.config.screen.width=t.width||window.innerWidth,e.config.screen.height=t.height||window.innerHeight,e.world.resize(),e.renderer.resize()}))}},{key:"setRenderer",value:function(){this.renderer=new l,this.targetElement.appendChild(this.renderer.instance.domElement),h.glContextSet(this.renderer.instance.getContext())}},{key:"update",value:function(){var e,t,n;this.isRunning&&(null===(e=this.camera)||void 0===e||e.update(),null===(t=this.world)||void 0===t||t.update(),null===(n=this.renderer)||void 0===n||n.update(),requestAnimationFrame(this.update.bind(this)))}},{key:"destroy",value:function(){var e;this.stop(),null===(e=this.world)||void 0===e||e.destroy()}},{key:"stop",value:function(){this.isRunning=!1}}]),e}();b.instance=void 0;var w,y,x,k,j=b,O=n(16),L=n(17),M=L.c.div(w||(w=Object(O.a)(["\n  display: block;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n"]))),R=n(10),G=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)();return Object(a.useEffect)((function(){return null!==e&&void 0!==e&&e.current&&(t.current=new j({targetElement:e.current})),function(){var e;return null===(e=t.current)||void 0===e?void 0:e.stop()}}),[e]),Object(R.jsx)(M,{id:"experience",ref:e})},T="#61dafb",E="#20232a",F=L.c.button(y||(y=Object(O.a)(["\n  /* Adapt the colors based on primary prop */\n  background: ",";\n  color: ",";\n\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n    color: ",";\n  }\n\n  font-size: 1em;\n  margin: 1em;\n  padding: 0.25em 1em;\n  border: 2px solid ",";\n  border-radius: 3px;\n"])),(function(e){return e.primary?T:"transparent"}),(function(e){return e.primary?"#fff":T}),(function(e){return e.primary?"transparent":T}),(function(e){return e.primary?T:"#fff"}),T),C=n(15),z=n(5),B=n.n(z),S=function(){var e=Object(C.a)(B.a.mark((function e(t){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.permissionRequest();case 2:if(!e.sent){e.next=7;break}return e.abrupt("return",t(!0));case 7:h.permissionDeniedUI();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1];return n?Object(R.jsx)(G,{}):Object(R.jsxs)("div",{className:"app",children:[Object(R.jsx)(F,{onClick:function(){return S(i)},children:"Allow Camera"}),Object(R.jsx)("a",{href:"https://www.zappar.com/",target:"_blank",rel:"noreferrer",className:"link",children:"Zappar: Augmented, Virtual & Mixed Reality Solution"})]})},A=L.b(x||(x=Object(O.a)(["\n  width: 100%;\n  height: 100%;\n"]))),D=L.a(k||(k=Object(O.a)(["\n  html,\n  body,\n  #root {\n    margin: 0;\n    padding: 0;\n\n    ",";\n\n    font-family: Arial, Helvetica, Arial, sans-serif;\n  }\n\n  .app {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n\n    ",";\n  }\n\n  .link {\n    font-size: bold;\n    color: ",";\n\n    :hover {\n      color: #000;\n    }\n  }\n"])),A,A,E),P=document.getElementById("root");Object(i.createRoot)(P).render(Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(D,{}),Object(R.jsx)(I,{})]})),r()}},[[120,1,2]]]);
//# sourceMappingURL=main.d49d3a16.chunk.js.map