(this.webpackJsonpcra=this.webpackJsonpcra||[]).push([[0],{102:function(e,t,i){"use strict";i.r(t);var n=i(12),s=i.n(n),a=i(42),r=i.n(a),c=(i(48),i(26)),h=i(7),o=i(0),u=i(1),d=i(10),f=function(){function e(){Object(o.a)(this,e),this.experience=void 0,this.instance=void 0,this.experience=new b,this.setInstance()}return Object(u.a)(e,[{key:"setInstance",value:function(){this.instance=new h.Camera}},{key:"start",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.instance.start(e)}},{key:"update",value:function(){this.experience.renderer&&this.instance.updateFrame(this.experience.renderer.instance)}}]),e}(),l=function(){function e(){Object(o.a)(this,e),this.experience=void 0,this.instance=void 0,this.experience=new b,this.setInstance()}return Object(u.a)(e,[{key:"setInstance",value:function(){this.instance=new d.WebGLRenderer({antialias:!0}),this.instance.setSize(this.experience.config.width,this.experience.config.height),this.instance.setPixelRatio(this.experience.config.pixelRatio)}},{key:"resize",value:function(){this.instance.setSize(this.experience.config.width,this.experience.config.height),this.instance.setPixelRatio(this.experience.config.pixelRatio)}},{key:"update",value:function(){this.instance.render(this.experience.scene,this.experience.camera.instance)}}]),e}(),v=i.p+"static/media/faceMeshTemplate.6e15d49f.png",g=function(){function e(){Object(o.a)(this,e),this.directionalLight=void 0,this.ambientLight=void 0,this.setLights()}return Object(u.a)(e,[{key:"setLights",value:function(){this.directionalLight=new d.DirectionalLight("white",.8),this.directionalLight.position.set(0,5,0),this.directionalLight.lookAt(0,0,0),this.ambientLight=new d.AmbientLight("white",.4)}}]),e}(),p=function(){function e(){Object(o.a)(this,e),this.experience=void 0,this.lights=void 0,this.faceMaterial=void 0,this.faceBufferGeometry=void 0,this.faceTrackerGroup=void 0,this.faceMeshMesh=void 0,this.experience=new b,this.setLights(),this.setFace(),this.setVisibility()}return Object(u.a)(e,[{key:"setLights",value:function(){this.lights=new g,this.experience.scene.add(this.lights.directionalLight,this.lights.ambientLight)}},{key:"setVisibility",value:function(){var e=this;this.faceTrackerGroup.faceTracker.onVisible.bind((function(){e.faceTrackerGroup.visible=!0})),this.faceTrackerGroup.faceTracker.onNotVisible.bind((function(){e.faceTrackerGroup.visible=!1}))}},{key:"setFace",value:function(){var e=new h.LoadingManager,t=new h.FaceTrackerLoader(e).load();this.faceTrackerGroup=new h.FaceAnchorGroup(this.experience.camera.instance,t),this.experience.scene.add(this.faceTrackerGroup);var i=new h.FaceMeshLoader(e).load();this.faceBufferGeometry=new h.FaceBufferGeometry(i);var n=new d.TextureLoader(e).load(v);n.flipY=!0,this.faceMaterial=new d.MeshStandardMaterial({map:n,transparent:!0}),this.faceMeshMesh=new d.Mesh(this.faceBufferGeometry,this.faceMaterial),this.faceTrackerGroup.add(this.faceMeshMesh)}},{key:"update",value:function(){this.faceBufferGeometry&&this.faceBufferGeometry.updateFromFaceAnchorGroup(this.faceTrackerGroup)}},{key:"destroy",value:function(){!!this.faceMaterial&&!!this.faceBufferGeometry&&!!this.lights&&!!this.experience.scene&&(this.faceMaterial.dispose(),this.faceBufferGeometry.dispose(),this.faceTrackerGroup.remove(this.faceMeshMesh),this.experience.scene.remove(this.lights.directionalLight,this.lights.ambientLight))}}]),e}(),w=function(){function e(){Object(o.a)(this,e),this.face=void 0,this.setFace()}return Object(u.a)(e,[{key:"setFace",value:function(){this.face=new p}},{key:"resize",value:function(){}},{key:"update",value:function(){this.face.update()}},{key:"destroy",value:function(){this.face.destroy()}}]),e}(),m=function(){function e(t){if(Object(o.a)(this,e),this.targetElement=void 0,this.config=void 0,this.scene=void 0,this.renderer=void 0,this.camera=void 0,this.world=void 0,h.browserIncompatible())throw h.browserIncompatibleUI(),new Error("Unsupported browser");if(e.instance)return e.instance;e.instance=this,this.targetElement=null===t||void 0===t?void 0:t.targetElement,this.targetElement?(this.setScene(),this.setCamera(),this.setConfig(),this.setRenderer(),this.setWorld(),this.setResize(),this.update()):console.warn("Missing 'targetElement' property")}return Object(u.a)(e,[{key:"setWorld",value:function(){this.world=new w}},{key:"setCamera",value:function(){this.camera=new f,this.camera.instance.start(!0),this.scene.background=this.camera.instance.backgroundTexture}},{key:"setConfig",value:function(){var e;this.config={pixelRatio:0,width:0,height:0},this.config.pixelRatio=Math.min(Math.max(window.devicePixelRatio,1),2);var t=null===(e=this.targetElement)||void 0===e?void 0:e.getBoundingClientRect();this.config.width=(null===t||void 0===t?void 0:t.width)||window.innerWidth,this.config.height=(null===t||void 0===t?void 0:t.height)||window.innerHeight}},{key:"setScene",value:function(){this.scene=new d.Scene}},{key:"setResize",value:function(){var e,t=this;null===(e=this.targetElement)||void 0===e||e.addEventListener("resize",(function(){var e,i=null===(e=t.targetElement)||void 0===e?void 0:e.getBoundingClientRect();t.config.width=(null===i||void 0===i?void 0:i.width)||window.innerWidth,t.config.height=(null===i||void 0===i?void 0:i.height)||window.innerHeight,t.renderer.resize()}))}},{key:"setRenderer",value:function(){var e;this.renderer=new l,null===(e=this.targetElement)||void 0===e||e.appendChild(this.renderer.instance.domElement),h.glContextSet(this.renderer.instance.getContext())}},{key:"update",value:function(){this.camera&&this.camera.update(),this.world&&this.world.update(),this.renderer&&this.renderer.update(),requestAnimationFrame(this.update.bind(this))}},{key:"destroy",value:function(){this.world&&this.world.destroy()}}]),e}();m.instance=void 0;var b=m,k=i(13),y=function(){var e=Object(n.useRef)(null);return Object(n.useEffect)((function(){var t=new b({targetElement:e.current});return function(){return t.destroy()}}),[e]),Object(k.jsx)("div",{id:"experience",ref:e})},x=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),i=t[0],s=t[1];return i?Object(k.jsx)(y,{}):Object(k.jsx)("div",{className:"splash-screen",children:Object(k.jsx)("button",{onClick:function(){h.permissionRequest().then((function(e){e?s(!0):h.permissionDeniedUI()}))},children:"Allow Camera"})})},j=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,103)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,a=t.getLCP,r=t.getTTFB;i(e),n(e),s(e),a(e),r(e)}))};r.a.render(Object(k.jsx)(s.a.StrictMode,{children:Object(k.jsx)(x,{})}),document.getElementById("root")),j()},48:function(e,t,i){}},[[102,1,2]]]);
//# sourceMappingURL=main.281dd230.chunk.js.map